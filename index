<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªá Th·ªëng B·ªè Phi·∫øu Tr·ª±c Tuy·∫øn</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Th√™m th∆∞ vi·ªán SheetJS ƒë·ªÉ xu·∫•t Excel -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        /* Gi·ªØ nguy√™n to√†n b·ªô CSS c≈© */
        body {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .page {
            min-height: 100vh;
            transition: transform 0.5s ease-in-out;
        }
        
        .page.hidden {
            display: none;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .admin-gradient {
            background: linear-gradient(135deg, #1e3a8a 0%, #3730a3 100%);
        }
        
        .header-gradient {
            background: linear-gradient(135deg, #3a0ca3 0%, #4361ee 100%);
        }
        
        .candidate-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 20px;
            cursor: pointer;
        }
        
        .candidate-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        
        .candidate-card.selected {
            border: 3px solid #4cc9f0;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            transform: translateY(-4px);
        }
        
        .progress-bar {
            transition: all 0.5s ease;
        }
        
        .submit-btn {
            transition: all 0.3s ease;
            border-radius: 15px;
        }
        
        .submit-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .submit-btn:not(:disabled):hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(67, 97, 238, 0.4);
        }
        
        .modal {
            backdrop-filter: blur(10px);
        }
        
        .candidate-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #4361ee, #4cc9f0);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
            font-weight: bold;
            margin: 0 auto 12px;
        }
        
        .check-icon {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #4cc9f0;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            opacity: 0;
            transform: scale(0);
            transition: all 0.3s ease;
        }
        
        .candidate-card.selected .check-icon {
            opacity: 1;
            transform: scale(1);
        }
        
        .countdown {
            font-family: 'Courier New', monospace;
            font-weight: bold;
        }
        
        .candidates-grid {
            grid-template-columns: repeat(6, 1fr);
            gap: 1rem;
        }
        
        .stat-card {
            transition: all 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-4px);
        }
        
        .chart-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .progress-bar-admin {
            transition: width 0.5s ease;
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .nav-btn {
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            z-index: 1000;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: #4361ee;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        
        .nav-btn:hover {
            background: rgba(67, 97, 238, 0.9);
            color: white;
            transform: translateY(-50%) scale(1.1);
        }
        
        .nav-btn.left {
            left: 20px;
        }
        
        .nav-btn.right {
            right: 20px;
        }
        
        @media (max-width: 768px) {
            .candidates-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.75rem;
            }
            
            .nav-btn {
                width: 50px;
                height: 50px;
                font-size: 20px;
            }
        }
        
        @media (min-width: 769px) and (max-width: 1024px) {
            .candidates-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 1rem;
            }
        }
        
        @media (min-width: 1025px) {
            .candidates-grid {
                grid-template-columns: repeat(6, 1fr);
                gap: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation Buttons -->
    <button class="nav-btn left" onclick="goToPage('voting')" id="nav-left">
        <i class="fas fa-vote-yea"></i>
    </button>
    <button class="nav-btn right" onclick="goToPage('admin')" id="nav-right">
        <i class="fas fa-chart-line"></i>
    </button>

    <!-- Page 1: Voting Page -->
    <div class="page gradient-bg" id="voting-page">
        <!-- Header Section -->
        <header class="header-gradient text-white py-8 shadow-2xl">
            <div class="max-w-7xl mx-auto px-4 text-center">
                <div class="mb-4">
                    <i class="fas fa-vote-yea text-6xl mb-4"></i>
                </div>
                <h1 class="text-4xl md:text-5xl font-bold mb-4">
                    B·∫¶U C·ª¨ BAN CH·∫§P H√ÄNH ƒêO√ÄN TR∆Ø·ªúNG
                </h1>
                <p class="text-xl md:text-2xl opacity-90">
                    B√¨nh ch·ªçn cho 15 ·ª©ng vi√™n trong 19 ·ª©ng vi√™n ∆∞u t√∫
                </p>
                <div class="mt-6">
                    <span class="bg-white bg-opacity-20 px-4 py-2 rounded-full text-sm">
                        <i class="fas fa-arrow-right mr-2"></i>
                        Vu·ªët sang ph·∫£i ƒë·ªÉ xem k·∫øt qu·∫£
                    </span>
                </div>
            </div>
        </header>

        <!-- Voting Info Bar -->
        <div class="bg-white shadow-lg py-6">
            <div class="max-w-7xl mx-auto px-4">
                <div class="flex flex-col md:flex-row items-center justify-between gap-4">
                    <div class="text-center md:text-left">
                        <p class="text-lg font-semibold text-gray-800 mb-2">
                            Vui l√≤ng ch·ªçn 15 ·ª©ng vi√™n trong 19 ·ª©ng vi√™n ƒë·ªÉ ho√†n t·∫•t b·ªè phi·∫øu
                        </p>
                        <div class="flex items-center justify-center md:justify-start gap-4">
                            <span class="text-sm text-gray-600">Ti·∫øn ƒë·ªô:</span>
                            <div class="w-48 bg-gray-200 rounded-full h-3">
                                <div class="progress-bar bg-gradient-to-r from-blue-500 to-cyan-400 h-3 rounded-full" 
                                     style="width: 0%" id="progress-bar"></div>
                            </div>
                            <span class="text-sm font-bold text-blue-600" id="progress-text">0/15</span>
                        </div>
                    </div>
                    <div class="text-center">
                        <p class="text-sm text-gray-600 mb-1">Th·ªùi gian c√≤n l·∫°i:</p>
                        <div class="countdown text-2xl font-bold text-red-600" id="countdown">05:00</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <main class="max-w-7xl mx-auto px-4 py-8">
            <!-- Candidates Grid -->
            <div class="candidates-grid grid mb-8" id="candidates-grid">
                <!-- Candidates will be generated by JavaScript -->
            </div>

            <!-- Voting Controls -->
            <div class="text-center bg-white rounded-3xl shadow-2xl p-8">
                <div class="mb-6">
                    <p class="text-2xl font-bold text-gray-800 mb-4">
                        ƒê√£ ch·ªçn: <span class="text-blue-600" id="selected-count">0</span>/15 ·ª©ng vi√™n
                    </p>
                    <div class="flex flex-wrap justify-center gap-2" id="selected-list">
                        <!-- Selected candidates will appear here -->
                    </div>
                </div>
                <button class="submit-btn bg-gradient-to-r from-blue-600 to-purple-600 text-white px-12 py-4 text-xl font-bold disabled:from-gray-400 disabled:to-gray-500" 
                        id="submit-btn" disabled onclick="showConfirmation()">
                    <i class="fas fa-paper-plane mr-2"></i>
                    G·ª¨I PHI·∫æU B·∫¶U
                </button>
            </div>
        </main>
    </div>

    <!-- Page 2: Admin Page -->
    <div class="page admin-gradient hidden" id="admin-page">
        <!-- Header -->
        <header class="admin-gradient text-white py-8 shadow-2xl">
            <div class="max-w-7xl mx-auto px-4">
                <div class="flex items-center justify-between">
                    <div>
                        <h1 class="text-4xl font-bold mb-2">
                            <i class="fas fa-chart-line mr-3"></i>
                            K·∫æT QU·∫¢ B·∫¶U C·ª¨ BCH ƒêO√ÄN TR∆Ø·ªúNG
                        </h1>
                        <p class="text-xl opacity-90">Th·ªëng k√™ v√† qu·∫£n l√Ω k·∫øt qu·∫£ b·∫ßu c·ª≠ Ban Ch·∫•p h√†nh ƒêo√†n tr∆∞·ªùng</p>
                        <div class="mt-4">
                            <span class="bg-white bg-opacity-20 px-4 py-2 rounded-full text-sm">
                                <i class="fas fa-arrow-left mr-2"></i>
                                Vu·ªët sang tr√°i ƒë·ªÉ b·ªè phi·∫øu
                            </span>
                        </div>
                    </div>
                    <div class="text-right">
                        <p class="text-sm opacity-80">C·∫≠p nh·∫≠t l·∫ßn cu·ªëi:</p>
                        <p class="text-lg font-semibold" id="last-update">--:--:--</p>
                        <div class="flex items-center gap-2 mt-2">
                            <div class="w-2 h-2 bg-green-400 rounded-full pulse"></div>
                            <span class="text-sm">ƒêang theo d√µi</span>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="max-w-7xl mx-auto px-4 py-8 bg-gray-100 min-h-screen">
            <!-- Statistics Overview -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="stat-card bg-gradient-to-r from-blue-500 to-blue-600 text-white p-6 rounded-2xl">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-blue-100 text-sm">T·ªïng phi·∫øu b·∫ßu</p>
                            <p class="text-3xl font-bold" id="total-votes">0</p>
                        </div>
                        <i class="fas fa-vote-yea text-4xl text-blue-200"></i>
                    </div>
                </div>
                
                <div class="stat-card bg-gradient-to-r from-green-500 to-green-600 text-white p-6 rounded-2xl">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-green-100 text-sm">T·ª∑ l·ªá tham gia</p>
                            <p class="text-3xl font-bold" id="participation-rate">0%</p>
                        </div>
                        <i class="fas fa-users text-4xl text-green-200"></i>
                    </div>
                </div>
                
                <div class="stat-card bg-gradient-to-r from-purple-500 to-purple-600 text-white p-6 rounded-2xl">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-purple-100 text-sm">·ª®ng vi√™n h√†ng ƒë·∫ßu</p>
                            <p class="text-lg font-bold" id="top-candidate">Ch∆∞a c√≥</p>
                        </div>
                        <i class="fas fa-crown text-4xl text-purple-200"></i>
                    </div>
                </div>
                
                <div class="stat-card bg-gradient-to-r from-orange-500 to-orange-600 text-white p-6 rounded-2xl">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-orange-100 text-sm">T·ªïng ·ª©ng vi√™n</p>
                            <p class="text-3xl font-bold" id="total-candidates">19</p>
                        </div>
                        <i class="fas fa-user-friends text-4xl text-orange-200"></i>
                    </div>
                </div>
            </div>

            <!-- Detailed Results -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                <!-- Vote Results Table -->
                <div class="chart-container p-6">
                    <h3 class="text-2xl font-bold text-gray-800 mb-6">
                        <i class="fas fa-trophy text-blue-600 mr-2"></i>
                        B·∫£ng x·∫øp h·∫°ng
                    </h3>
                    <div class="space-y-3 max-h-96 overflow-y-auto" id="results-table">
                        <p class="text-gray-500 text-center py-8">Ch∆∞a c√≥ k·∫øt qu·∫£ b·ªè phi·∫øu</p>
                    </div>
                </div>

                <!-- Recent Votes -->
                <div class="chart-container p-6">
                    <h3 class="text-2xl font-bold text-gray-800 mb-6">
                        <i class="fas fa-history text-green-600 mr-2"></i>
                        Phi·∫øu b·∫ßu g·∫ßn ƒë√¢y
                    </h3>
                    <div class="space-y-3 max-h-96 overflow-y-auto" id="recent-votes">
                        <p class="text-gray-500 text-center py-8">Ch∆∞a c√≥ phi·∫øu b·∫ßu n√†o</p>
                    </div>
                </div>
            </div>

            <!-- All Candidates Overview -->
            <div class="chart-container p-6 mb-8">
                <h3 class="text-2xl font-bold text-gray-800 mb-6">
                    <i class="fas fa-users text-purple-600 mr-2"></i>
                    T·ªïng quan t·∫•t c·∫£ ·ª©ng vi√™n
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="all-candidates">
                    <!-- All candidates will be listed here -->
                </div>
            </div>

            <!-- Export and Management Options -->
            <div class="chart-container p-6">
                <h3 class="text-2xl font-bold text-gray-800 mb-6">
                    <i class="fas fa-tools text-indigo-600 mr-2"></i>
                    C√¥ng c·ª• qu·∫£n l√Ω
                </h3>
                <div class="flex flex-wrap gap-4 justify-center">
                    <button class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-xl font-semibold transition-colors" 
                            onclick="exportResults('csv')">
                        <i class="fas fa-file-csv mr-2"></i>Xu·∫•t CSV
                    </button>
                    <button class="bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-xl font-semibold transition-colors" 
                            onclick="exportResults('json')">
                        <i class="fas fa-file-code mr-2"></i>Xu·∫•t JSON
                    </button>
                    <!-- Th√™m n√∫t xu·∫•t Excel -->
                    <button class="bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-3 rounded-xl font-semibold transition-colors" 
                            onclick="exportResults('excel')">
                        <i class="fas fa-file-excel mr-2"></i>Xu·∫•t Excel
                    </button>
                    <button class="bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-xl font-semibold transition-colors" 
                            onclick="printResults()">
                        <i class="fas fa-print mr-2"></i>In b√°o c√°o
                    </button>
                    <button class="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-xl font-semibold transition-colors" 
                            onclick="refreshData()">
                        <i class="fas fa-sync-alt mr-2"></i>L√†m m·ªõi d·ªØ li·ªáu
                    </button>
                    <button class="bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-xl font-semibold transition-colors" 
                            onclick="resetAllVotes()">
                        <i class="fas fa-trash mr-2"></i>X√≥a t·∫•t c·∫£ d·ªØ li·ªáu
                    </button>
                </div>
            </div>
        </main>
    </div>

    <!-- Confirmation Modal -->
    <div class="modal fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50" id="confirmation-modal">
        <div class="bg-white rounded-3xl shadow-2xl max-w-2xl w-full mx-4 max-h-96 overflow-y-auto">
            <div class="p-8">
                <div class="text-center mb-6">
                    <i class="fas fa-check-circle text-6xl text-green-500 mb-4"></i>
                    <h2 class="text-3xl font-bold text-gray-800 mb-2">X√°c nh·∫≠n b·ªè phi·∫øu</h2>
                    <p class="text-gray-600">B·∫°n ƒë√£ ch·ªçn c√°c ·ª©ng vi√™n sau:</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8" id="confirmation-list">
                    <!-- Selected candidates will be listed here -->
                </div>
                
                <div class="flex gap-4 justify-center">
                    <button class="px-8 py-3 bg-gray-500 text-white rounded-xl font-semibold hover:bg-gray-600 transition-colors" 
                            onclick="hideConfirmation()">
                        <i class="fas fa-times mr-2"></i>H·ªßy b·ªè
                    </button>
                    <button class="px-8 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-xl font-semibold hover:from-green-600 hover:to-blue-600 transition-all" 
                            onclick="submitVote()">
                        <i class="fas fa-check mr-2"></i>X√°c nh·∫≠n
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Screen -->
    <div class="modal fixed inset-0 bg-gradient-to-br from-green-400 to-blue-500 hidden items-center justify-center z-50" id="success-modal">
        <div class="text-center text-white px-4">
            <i class="fas fa-trophy text-8xl mb-8 animate-bounce"></i>
            <h1 class="text-5xl font-bold mb-4">Ch√∫c m·ª´ng!</h1>
            <p class="text-2xl mb-8">Phi·∫øu b·∫ßu c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c ghi nh·∫≠n th√†nh c√¥ng</p>
            <div class="bg-white bg-opacity-20 rounded-2xl p-6 mb-8">
                <p class="text-lg">C·∫£m ∆°n b·∫°n ƒë√£ tham gia b·ªè phi·∫øu</p>
                <p class="text-sm opacity-80">K·∫øt qu·∫£ s·∫Ω ƒë∆∞·ª£c c√¥ng b·ªë sau khi k·∫øt th√∫c cu·ªôc b·∫ßu c·ª≠</p>
            </div>
            <div class="flex gap-4 justify-center">
                <button class="bg-white text-blue-600 px-8 py-4 rounded-xl font-bold text-xl hover:bg-gray-100 transition-colors" 
                        onclick="startNewVote()">
                    <i class="fas fa-plus mr-2"></i>B·ªè phi·∫øu m·ªõi
                </button>
                <button class="bg-white bg-opacity-20 text-white px-8 py-4 rounded-xl font-bold text-xl hover:bg-opacity-30 transition-colors" 
                        onclick="goToPage('admin')">
                    <i class="fas fa-chart-line mr-2"></i>Xem k·∫øt qu·∫£
                </button>
            </div>
        </div>
    </div>

    <!-- Timeout Modal -->
    <div class="modal fixed inset-0 bg-gradient-to-br from-red-400 to-orange-500 hidden items-center justify-center z-50" id="timeout-modal">
        <div class="text-center text-white px-4">
            <i class="fas fa-clock text-8xl mb-8 animate-pulse"></i>
            <h1 class="text-5xl font-bold mb-4">H·∫øt th·ªùi gian!</h1>
            <p class="text-2xl mb-8">Th·ªùi gian b·ªè phi·∫øu ƒë√£ k·∫øt th√∫c</p>
            <div class="bg-white bg-opacity-20 rounded-2xl p-6 mb-8">
                <p class="text-lg">B·∫°n ƒë√£ kh√¥ng ho√†n th√†nh phi·∫øu b·∫ßu ƒë√∫ng h·∫°n</p>
                <p class="text-sm opacity-80">Vui l√≤ng b·∫Øt ƒë·∫ßu phi·∫øu b·∫ßu m·ªõi ho·∫∑c xem k·∫øt qu·∫£</p>
            </div>
            <div class="flex gap-4 justify-center">
                <button class="bg-white text-red-600 px-8 py-4 rounded-xl font-bold text-xl hover:bg-gray-100 transition-colors" 
                        onclick="startNewVote()">
                    <i class="fas fa-plus mr-2"></i>B·ªè phi·∫øu m·ªõi
                </button>
                <button class="bg-white bg-opacity-20 text-white px-8 py-4 rounded-xl font-bold text-xl hover:bg-opacity-30 transition-colors" 
                        onclick="goToPage('admin')">
                    <i class="fas fa-chart-line mr-2"></i>Xem k·∫øt qu·∫£
                </button>
            </div>
        </div>
    </div>

    <script>
        // Sample candidates data
        const candidates = [
            { id: 1, name: "B√πi H√† Anh", position: "Chi ƒëo√†n 11A9", description: "Sinh nƒÉm 2009" },
            { id: 2, name: "Tr·∫ßn Ti·∫øn Anh", position: "Chi ƒëo√†n 12A7", description: "Sinh nƒÉm 2008" },
            { id: 3, name: "Nguy·ªÖn Th·ªã Lan Anh", position: "Chi ƒëo√†n CBGV", description: "Sinh nƒÉm 1997" },
            { id: 4, name: "Nguy·ªÖn H·ªìng Khi√™m", position: "Chi ƒëo√†n CBGV", description: "Sinh nƒÉm 1997" },
            { id: 5, name: "V√µ Tr·∫ßn Kh√°nh Linh", position: "Chi ƒëo√†n 11A1", description: "Sinh nƒÉm 2009" },
            { id: 6, name: "L√™ Ho√†ng Gia Linh", position: "Chi ƒëo√†n CBGV", description: "Sinh nƒÉm 1998" },
            { id: 7, name: "L√™ Ho√†ng Long", position: "Chi ƒëo√†n CBGV", description: "Sinh nƒÉm 2002" },
            { id: 8, name: "Hu·ª≥nh Th·ªã B√¨nh Minh", position: "Chi ƒëo√†n 10A1", description: "Sinh nƒÉm 2010" },
            { id: 9, name: "Nguy·ªÖn Thi·ªán Minh", position: "Chi ƒëo√†n 12A10", description: "Sinh nƒÉm 2008" },
            { id: 10, name: "Tr·∫ßn V∆∞∆°ng Ph∆∞∆°ng Ng√¢n", position: "Chi ƒëo√†n 11A5", description: "Sinh nƒÉm 2009" },
            { id: 11, name: "Ph·∫°m Kinh Qu·ªëc", position: "Chi ƒëo√†n 10A3", description: "Sinh nƒÉm 2010" },
            { id: 12, name: "Nguy·ªÖn V√µ Th·∫£o", position: "Chi ƒëo√†n CBGV", description: "Sinh nƒÉm 1995" },
            { id: 13, name: "L√™ ƒê·ª©c Thi√™n", position: "Chi ƒëo√†n 12A3", description: "Sinh nƒÉm 2008" },
            { id: 14, name: "V√µ Tr·∫ßn Anh Th∆°", position: "Chi ƒëo√†n 10A4", description: "Sinh nƒÉm 2010" },
            { id: 15, name: "Nguy·ªÖn Qu√Ω K·ª≥ Th∆∞", position: "Chi ƒëo√†n 11A15", description: "Sinh nƒÉm 2009" },
            { id: 16, name: "ƒê·ªó Nguy·ªÖn Ho√†i Thu·∫≠n", position: "Chi ƒëo√†n CBGV", description: "Sinh nƒÉm 2002" },
            { id: 17, name: "Nguy·ªÖn Th·ªã Ho√†i Th∆∞∆°ng", position: "Chi ƒëo√†n CBGV", description: "Sinh nƒÉm 2002" },
            { id: 18, name: "V√µ H·∫° V·ªπ", position: "Chi ƒëo√†n 12A3", description: "Sinh nƒÉm 2008" },
            { id: 19, name: "Tr·∫ßn VƒÉn Ng·ªçc V·ªπ", position: "Chi ƒëo√†n CBGV", description: "Sinh nƒÉm 2001" }
        ];

        let selectedCandidates = [];
        let timeLeft = 300; // 5 minutes
        let countdownTimer;
        let currentPage = 'voting';
        let allVotes = [];
        let voteStats = {};

        // Page navigation
        function goToPage(page) {
            const votingPage = document.getElementById('voting-page');
            const adminPage = document.getElementById('admin-page');
            
            if (page === 'voting') {
                votingPage.classList.remove('hidden');
                adminPage.classList.add('hidden');
                currentPage = 'voting';
            } else if (page === 'admin') {
                votingPage.classList.add('hidden');
                adminPage.classList.remove('hidden');
                currentPage = 'admin';
                loadAdminData();
            }
        }

        // Initialize the page
        function init() {
            renderCandidates();
            startCountdown();
            updateUI();
            loadAdminData();
        }

        // Render candidates grid
        function renderCandidates() {
            const grid = document.getElementById('candidates-grid');
            grid.innerHTML = candidates.map(candidate => `
                <div class="candidate-card bg-white shadow-lg p-3 relative" onclick="toggleCandidate(${candidate.id})">
                    <div class="check-icon">
                        <i class="fas fa-check text-sm"></i>
                    </div>
                    <div class="candidate-avatar">
                        ${candidate.name.split(' ').map(n => n[0]).join('').slice(0, 2)}
                    </div>
                    <div class="text-center">
                        <div class="text-xs bg-blue-100 text-blue-800 px-1 py-1 rounded-full inline-block mb-1">
                            #${candidate.id}
                        </div>
                        <h3 class="font-bold text-sm text-gray-800 mb-1">${candidate.name}</h3>
                        <p class="text-blue-600 font-semibold text-xs mb-1">${candidate.position}</p>
                        <p class="text-gray-600 text-xs">${candidate.description}</p>
                    </div>
                </div>
            `).join('');
        }

        // Toggle candidate selection
        function toggleCandidate(id) {
            // Don't allow selection if time is up
            if (timeLeft <= 0) {
                return;
            }
            
            const index = selectedCandidates.indexOf(id);
            
            if (index > -1) {
                selectedCandidates.splice(index, 1);
            } else {
                if (selectedCandidates.length < 15) {
                    selectedCandidates.push(id);
                } else {
                    alert('B·∫°n ch·ªâ c√≥ th·ªÉ ch·ªçn t·ªëi ƒëa 15 ·ª©ng vi√™n!');
                    return;
                }
            }
            
            updateUI();
        }

        // Update UI elements
        function updateUI() {
            // Update progress bar
            const progress = (selectedCandidates.length / 15) * 100;
            document.getElementById('progress-bar').style.width = progress + '%';
            document.getElementById('progress-text').textContent = `${selectedCandidates.length}/15`;
            
            // Update selected count
            document.getElementById('selected-count').textContent = selectedCandidates.length;
            
            // Update submit button
            const submitBtn = document.getElementById('submit-btn');
            submitBtn.disabled = selectedCandidates.length !== 15 || timeLeft <= 0;
            
            // Update candidate cards
            candidates.forEach(candidate => {
                const card = document.querySelector(`[onclick="toggleCandidate(${candidate.id})"]`);
                if (selectedCandidates.includes(candidate.id)) {
                    card.classList.add('selected');
                } else {
                    card.classList.remove('selected');
                }
            });
            
            // Update selected list
            const selectedList = document.getElementById('selected-list');
            selectedList.innerHTML = selectedCandidates.map(id => {
                const candidate = candidates.find(c => c.id === id);
                return `<span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">${candidate.name}</span>`;
            }).join('');
        }

        // Start countdown timer
        function startCountdown() {
            // Clear any existing timer
            if (countdownTimer) {
                clearInterval(countdownTimer);
            }
            
            countdownTimer = setInterval(() => {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                document.getElementById('countdown').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                if (timeLeft <= 0) {
                    clearInterval(countdownTimer);
                    showTimeoutModal();
                }
                timeLeft--;
            }, 1000);
        }

        // Show timeout modal
        function showTimeoutModal() {
            const timeoutModal = document.getElementById('timeout-modal');
            timeoutModal.classList.remove('hidden');
            timeoutModal.classList.add('flex');
            
            // Disable all candidate selections
            document.querySelectorAll('.candidate-card').forEach(card => {
                card.style.pointerEvents = 'none';
                card.style.opacity = '0.7';
            });
            
            // Disable submit button
            document.getElementById('submit-btn').disabled = true;
        }

        // Start a new vote
        function startNewVote() {
            // Hide all modals
            document.getElementById('success-modal').classList.add('hidden');
            document.getElementById('success-modal').classList.remove('flex');
            document.getElementById('timeout-modal').classList.add('hidden');
            document.getElementById('timeout-modal').classList.remove('flex');
            
            // Reset voting state
            selectedCandidates = [];
            timeLeft = 300; // Reset to 5 minutes
            
            // Re-enable candidate selections
            document.querySelectorAll('.candidate-card').forEach(card => {
                card.style.pointerEvents = 'auto';
                card.style.opacity = '1';
            });
            
            // Reset UI and start countdown
            updateUI();
            startCountdown();
            
            // Make sure we're on the voting page
            goToPage('voting');
        }

        // Show confirmation modal
        function showConfirmation() {
            const modal = document.getElementById('confirmation-modal');
            const list = document.getElementById('confirmation-list');
            
            list.innerHTML = selectedCandidates.map(id => {
                const candidate = candidates.find(c => c.id === id);
                return `
                    <div class="flex items-center gap-3 p-3 bg-gray-50 rounded-xl">
                        <div class="w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold text-sm">
                            ${candidate.name.split(' ').map(n => n[0]).join('').slice(0, 2)}
                        </div>
                        <div>
                            <p class="font-semibold text-gray-800">${candidate.name}</p>
                            <p class="text-sm text-blue-600">${candidate.position}</p>
                        </div>
                    </div>
                `;
            }).join('');
            
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        // Hide confirmation modal
        function hideConfirmation() {
            const modal = document.getElementById('confirmation-modal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        }

        // Submit vote
        function submitVote() {
            hideConfirmation();
            
            // Record the vote
            const voteData = {
                id: Date.now(),
                timestamp: new Date().toLocaleString('vi-VN'),
                candidates: selectedCandidates.map(id => {
                    const candidate = candidates.find(c => c.id === id);
                    return {
                        id: candidate.id,
                        name: candidate.name,
                        position: candidate.position
                    };
                }),
                voterIP: 'Anonymous',
                sessionId: Math.random().toString(36).substr(2, 9)
            };
            
            // Save to localStorage
            let savedVotes = JSON.parse(localStorage.getItem('votingSystemData') || '[]');
            savedVotes.push(voteData);
            localStorage.setItem('votingSystemData', JSON.stringify(savedVotes));
            
            // Show success modal
            const successModal = document.getElementById('success-modal');
            successModal.classList.remove('hidden');
            successModal.classList.add('flex');
            
            // C·∫≠p nh·∫≠t d·ªØ li·ªáu admin ngay l·∫≠p t·ª©c
            loadAdminData();
        }

        // Admin functions
        function loadAdminData() {
            const savedVotes = localStorage.getItem('votingSystemData');
            if (savedVotes) {
                allVotes = JSON.parse(savedVotes);
                calculateStatistics();
            }
            updateAllDisplays();
            updateLastUpdateTime();
        }

        function calculateStatistics() {
            voteStats = {};
            
            allVotes.forEach(vote => {
                vote.candidates.forEach(candidate => {
                    if (!voteStats[candidate.id]) {
                        voteStats[candidate.id] = {
                            candidate: candidate,
                            count: 0,
                            percentage: 0
                        };
                    }
                    voteStats[candidate.id].count++;
                });
            });
            
            const totalVotes = allVotes.length;
            Object.keys(voteStats).forEach(id => {
                voteStats[id].percentage = totalVotes > 0 ? 
                    ((voteStats[id].count / totalVotes) * 100).toFixed(1) : 0;
            });
        }

        function updateAllDisplays() {
            updateOverviewStats();
            updateResultsTable();
            updateRecentVotes();
            updateAllCandidates();
        }

        function updateOverviewStats() {
            document.getElementById('total-votes').textContent = allVotes.length;
            document.getElementById('participation-rate').textContent = 
                ((allVotes.length / 1000) * 100).toFixed(1) + '%';
            
            let topCandidate = 'Ch∆∞a c√≥';
            let maxVotes = 0;
            Object.values(voteStats).forEach(stat => {
                if (stat.count > maxVotes) {
                    maxVotes = stat.count;
                    topCandidate = stat.candidate.name;
                }
            });
            document.getElementById('top-candidate').textContent = topCandidate;
        }

        function updateResultsTable() {
            const table = document.getElementById('results-table');
            
            if (Object.keys(voteStats).length === 0) {
                table.innerHTML = '<p class="text-gray-500 text-center py-8">Ch∆∞a c√≥ k·∫øt qu·∫£ b·ªè phi·∫øu</p>';
                return;
            }
            
            const sortedStats = Object.values(voteStats).sort((a, b) => b.count - a.count);
            
            table.innerHTML = sortedStats.map((stat, index) => {
                const percentage = ((stat.count / allVotes.length) * 100).toFixed(1);
                const medalIcon = index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : '';
                
                return `
                    <div class="flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors">
                        <div class="flex items-center gap-4">
                            <div class="w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold">
                                ${medalIcon || (index + 1)}
                            </div>
                            <div>
                                <p class="font-semibold text-gray-800">${stat.candidate.name}</p>
                                <p class="text-sm text-gray-600">${stat.candidate.position}</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <p class="text-2xl font-bold text-blue-600">${stat.count}</p>
                            <p class="text-sm text-gray-500">${percentage}%</p>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function updateRecentVotes() {
            const container = document.getElementById('recent-votes');
            
            if (allVotes.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-8">Ch∆∞a c√≥ phi·∫øu b·∫ßu n√†o</p>';
                return;
            }
            
            const recentVotes = allVotes.slice(-10).reverse();
            
            container.innerHTML = recentVotes.map(vote => `
                <div class="bg-gray-50 rounded-xl p-4 hover:bg-gray-100 transition-colors">
                    <div class="flex items-center justify-between mb-3">
                        <span class="text-sm font-semibold text-gray-800">Phi·∫øu #${vote.sessionId}</span>
                        <span class="text-xs text-gray-500">${vote.timestamp}</span>
                    </div>
                    <div class="flex flex-wrap gap-1 mb-2">
                        ${vote.candidates.slice(0, 5).map(candidate => 
                            `<span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs">${candidate.name}</span>`
                        ).join('')}
                        ${vote.candidates.length > 5 ? `<span class="text-xs text-gray-500">+${vote.candidates.length - 5} kh√°c</span>` : ''}
                    </div>
                    <div class="text-xs text-gray-500">
                        ƒê√£ ch·ªçn: ${vote.candidates.length}/15 ·ª©ng vi√™n
                    </div>
                </div>
            `).join('');
        }

        function updateAllCandidates() {
            const container = document.getElementById('all-candidates');
            
            container.innerHTML = candidates.map(candidate => {
                const stat = voteStats[candidate.id];
                const voteCount = stat ? stat.count : 0;
                const percentage = allVotes.length > 0 ? ((voteCount / allVotes.length) * 100).toFixed(1) : 0;
                
                return `
                    <div class="bg-gray-50 rounded-xl p-4 hover:bg-gray-100 transition-colors">
                        <div class="flex items-center gap-3 mb-3">
                            <div class="w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-sm">
                                ${candidate.name.split(' ').map(n => n[0]).join('').slice(0, 2)}
                            </div>
                            <div class="flex-1">
                                <p class="font-semibold text-gray-800 text-sm">${candidate.name}</p>
                                <p class="text-xs text-blue-600">${candidate.position}</p>
                            </div>
                        </div>
                        <div class="text-center mb-2">
                            <p class="text-2xl font-bold text-blue-600">${voteCount}</p>
                            <p class="text-xs text-gray-500">${percentage}% phi·∫øu b·∫ßu</p>
                        </div>
                        <div class="bg-gray-200 rounded-full h-2">
                            <div class="progress-bar-admin bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full" 
                                 style="width: ${Math.min(percentage, 100)}%"></div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function updateLastUpdateTime() {
            const now = new Date();
            document.getElementById('last-update').textContent = 
                now.toLocaleTimeString('vi-VN');
        }

        // Export functions
        function exportResults(format) {
            if (allVotes.length === 0) {
                alert('Kh√¥ng c√≥ d·ªØ li·ªáu ƒë·ªÉ xu·∫•t!');
                return;
            }
            
            if (format === 'csv') {
                exportToCSV();
            } else if (format === 'json') {
                exportToJSON();
            } else if (format === 'excel') {
                exportToExcel();
            }
        }

        // Th√™m h√†m xu·∫•t Excel
        function exportToExcel() {
            try {
                // T·∫°o workbook m·ªõi
                const wb = XLSX.utils.book_new();
                
                // T·∫°o worksheet cho phi·∫øu b·∫ßu
                const voteData = allVotes.map(vote => ({
                    'Th·ªùi gian': vote.timestamp,
                    'M√£ phi·∫øu': vote.sessionId,
                    'S·ªë ·ª©ng vi√™n': vote.candidates.length,
                    'Danh s√°ch ·ª©ng vi√™n': vote.candidates.map(c => c.name).join(', ')
                }));
                
                const voteWS = XLSX.utils.json_to_sheet(voteData);
                XLSX.utils.book_append_sheet(wb, voteWS, 'Phi·∫øu b·∫ßu');
                
                // T·∫°o worksheet cho th·ªëng k√™ ·ª©ng vi√™n
                const sortedStats = Object.values(voteStats).sort((a, b) => b.count - a.count);
                const statsData = sortedStats.map(stat => ({
                    'T√™n ·ª©ng vi√™n': stat.candidate.name,
                    'Ch·ª©c v·ª•': stat.candidate.position,
                    'S·ªë phi·∫øu': stat.count,
                    'T·ª∑ l·ªá %': stat.percentage + '%'
                }));
                
                const statsWS = XLSX.utils.json_to_sheet(statsData);
                XLSX.utils.book_append_sheet(wb, statsWS, 'Th·ªëng k√™ ·ª©ng vi√™n');
                
                // T·∫°o worksheet cho danh s√°ch ·ª©ng vi√™n
                const candidateData = candidates.map(candidate => {
                    const stat = voteStats[candidate.id];
                    return {
                        'M√£ s·ªë': candidate.id,
                        'T√™n ·ª©ng vi√™n': candidate.name,
                        'Ch·ª©c v·ª•': candidate.position,
                        'M√¥ t·∫£': candidate.description,
                        'S·ªë phi·∫øu': stat ? stat.count : 0,
                        'T·ª∑ l·ªá %': stat ? stat.percentage + '%' : '0%'
                    };
                });
                
                const candidateWS = XLSX.utils.json_to_sheet(candidateData);
                XLSX.utils.book_append_sheet(wb, candidateWS, 'Danh s√°ch ·ª©ng vi√™n');
                
                // Xu·∫•t file
                XLSX.writeFile(wb, `ket-qua-bo-phieu-${new Date().toISOString().slice(0, 10)}.xlsx`);
                
                alert('‚úÖ Xu·∫•t file Excel th√†nh c√¥ng!');
            } catch (error) {
                console.error('L·ªói khi xu·∫•t Excel:', error);
                alert('‚ùå C√≥ l·ªói x·∫£y ra khi xu·∫•t file Excel. Vui l√≤ng th·ª≠ l·∫°i!');
            }
        }

        function exportToCSV() {
            let csv = '\uFEFFTh·ªùi gian,M√£ phi·∫øu,S·ªë ·ª©ng vi√™n,Danh s√°ch ·ª©ng vi√™n\n';
            
            allVotes.forEach(vote => {
                const candidateNames = vote.candidates.map(c => c.name).join('; ');
                csv += `"${vote.timestamp}","${vote.sessionId}","${vote.candidates.length}","${candidateNames}"\n`;
            });
            
            csv += '\n\nTh·ªëng k√™ theo ·ª©ng vi√™n:\n';
            csv += 'T√™n ·ª©ng vi√™n,Ch·ª©c v·ª•,S·ªë phi·∫øu,T·ª∑ l·ªá %\n';
            
            const sortedStats = Object.values(voteStats).sort((a, b) => b.count - a.count);
            sortedStats.forEach(stat => {
                const percentage = ((stat.count / allVotes.length) * 100).toFixed(1);
                csv += `"${stat.candidate.name}","${stat.candidate.position}","${stat.count}","${percentage}%"\n`;
            });
            
            // Create and download file
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', 'ket-qua-bo-phieu.csv');
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
        }

        function exportToJSON() {
            const data = {
                exportTime: new Date().toLocaleString('vi-VN'),
                totalVotes: allVotes.length,
                participationRate: ((allVotes.length / 1000) * 100).toFixed(1) + '%',
                statistics: voteStats,
                votes: allVotes,
                candidates: candidates
            };
            
            downloadFile(JSON.stringify(data, null, 2), 'ket-qua-bo-phieu.json', 'application/json');
        }

        function downloadFile(content, filename, contentType) {
            try {
                const blob = new Blob([content], { type: contentType + ';charset=utf-8;' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                a.style.display = 'none';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);
            } catch (error) {
                console.error('L·ªói khi t·∫£i file:', error);
                alert('‚ùå C√≥ l·ªói x·∫£y ra khi t·∫£i file. Vui l√≤ng th·ª≠ l·∫°i!');
            }
        }

        function printResults() {
            if (allVotes.length === 0) {
                alert('Kh√¥ng c√≥ d·ªØ li·ªáu ƒë·ªÉ in!');
                return;
            }
            
            const printWindow = window.open('', '_blank', 'noopener,noreferrer');
            const sortedStats = Object.values(voteStats).sort((a, b) => b.count - a.count);
            
            printWindow.document.write(`
                <html>
                <head>
                    <title>B√°o c√°o K·∫øt qu·∫£ B·ªè phi·∫øu</title>
                    <style>
                        body { font-family: Arial, sans-serif; margin: 20px; }
                        .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #333; padding-bottom: 20px; }
                        .stats { margin-bottom: 30px; }
                        .candidate { padding: 10px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; }
                        .summary { background: #f5f5f5; padding: 15px; margin-bottom: 20px; border-radius: 5px; }
                        .rank { font-weight: bold; color: #333; }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h1>B√ÅO C√ÅO K·∫æT QU·∫¢ B·ªé PHI·∫æU</h1>
                        <p>Th·ªùi gian xu·∫•t: ${new Date().toLocaleString('vi-VN')}</p>
                    </div>
                    
                    <div class="summary">
                        <h3>T√≥m t·∫Øt k·∫øt qu·∫£:</h3>
                        <p><strong>T·ªïng s·ªë phi·∫øu b·∫ßu:</strong> ${allVotes.length}</p>
                        <p><strong>T·ª∑ l·ªá tham gia:</strong> ${((allVotes.length / 1000) * 100).toFixed(1)}%</p>
                        <p><strong>T·ªïng s·ªë ·ª©ng vi√™n:</strong> ${candidates.length}</p>
                        <p><strong>·ª®ng vi√™n c√≥ nhi·ªÅu phi·∫øu nh·∫•t:</strong> ${sortedStats[0] ? sortedStats[0].candidate.name : 'Ch∆∞a c√≥'}</p>
                    </div>
                    
                    <div class="stats">
                        <h3>B·∫£ng x·∫øp h·∫°ng chi ti·∫øt:</h3>
                        ${sortedStats.map((stat, index) => {
                            const percentage = ((stat.count / allVotes.length) * 100).toFixed(1);
                            const medal = index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : '';
                            return `
                                <div class="candidate">
                                    <div>
                                        <span class="rank">${medal} ${index + 1}. ${stat.candidate.name}</span><br>
                                        <small>${stat.candidate.position}</small>
                                    </div>
                                    <div style="text-align: right;">
                                        <strong>${stat.count} phi·∫øu</strong><br>
                                        <small>${percentage}%</small>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                    
                    <div style="margin-top: 40px; text-align: center; color: #666; font-size: 12px;">
                        <p>B√°o c√°o ƒë∆∞·ª£c t·∫°o t·ª± ƒë·ªông b·ªüi H·ªá th·ªëng B·ªè phi·∫øu Tr·ª±c tuy·∫øn</p>
                    </div>
                </body>
                </html>
            `);
            
            printWindow.document.close();
            printWindow.print();
        }

        function refreshData() {
            loadAdminData();
            alert('D·ªØ li·ªáu ƒë√£ ƒë∆∞·ª£c l√†m m·ªõi!');
        }

        function resetAllVotes() {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a t·∫•t c·∫£ d·ªØ li·ªáu b·ªè phi·∫øu?\n\nH√†nh ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c v√† s·∫Ω x√≥a:\n- T·∫•t c·∫£ phi·∫øu b·∫ßu ƒë√£ ghi nh·∫≠n\n- To√†n b·ªô th·ªëng k√™\n- L·ªãch s·ª≠ b·ªè phi·∫øu')) {
                try {
                    localStorage.removeItem('votingSystemData');
                    allVotes = [];
                    voteStats = {};
                    
                    // Reset all displays
                    updateAllDisplays();
                    
                    // Show success message
                    alert('‚úÖ ƒê√£ x√≥a t·∫•t c·∫£ d·ªØ li·ªáu b·ªè phi·∫øu th√†nh c√¥ng!\n\nT·∫•t c·∫£ th·ªëng k√™ ƒë√£ ƒë∆∞·ª£c ƒë·∫∑t l·∫°i v·ªÅ 0.');
                    
                    // Force refresh the admin page
                    loadAdminData();
                } catch (error) {
                    console.error('L·ªói khi x√≥a d·ªØ li·ªáu:', error);
                    alert('‚ùå C√≥ l·ªói x·∫£y ra khi x√≥a d·ªØ li·ªáu. Vui l√≤ng th·ª≠ l·∫°i!');
                }
            }
        }

        // Auto refresh admin data every 30 seconds
        setInterval(() => {
            if (currentPage === 'admin') {
                loadAdminData();
            }
        }, 30000);

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', init);

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft' && currentPage === 'admin') {
                goToPage('voting');
            } else if (e.key === 'ArrowRight' && currentPage === 'voting') {
                goToPage('admin');
            }
        });
    </script>
</body>
</html>
